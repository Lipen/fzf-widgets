#!/bin/zsh

if [[ -z $DOT_BASE_DIR ]]; then
  if [[ -n $TMUX ]]; then
    local msg='fzf-edit-dotfiles: Not set \$DOT_BASE_DIR'
    tmux split-window "less <<< \"$msg\""
  fi
  return 1
fi

__fzf::widget::init "$EDITOR --"

git -C $DOT_BASE_DIR ls-files | \
  sed "s|^|~/|g" | \
  __fzf::widget::select $FZF_WIDGET_OPTS[edit-dotfiles] -m

__fzf::widget::insert
